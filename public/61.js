webpackJsonp([61],{"5DJ5":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("NYxO"),a=e("QxPg"),n=e("EQBe"),r=e("Wv7l"),l=e.n(r),o=e("pNxz"),c=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t};a.default.library.add([n._20,n._23,n._7,n.F,n.J,n._2,n._0]),i.default={components:{FileUploader:l.a},data:function(){return{profile:null}},computed:c({},Object(s.e)(["user","meta","impersonating"]),Object(s.e)("auth",["isAuth"]),{uploadAvatarLink:function(){return route("core.avatars.store")},isSelfVisiting:function(){return this.user.id===this.profile.id},avatarId:function(){return this.isSelfVisiting?this.user.avatarId:this.profile.avatar?this.profile.avatar.id:null},avatarLink:function(){return route("core.avatars.show",this.avatarId||"null")},timeline:function(){var t=this,i=this.profile.timeline.data;return i.map(function(t){return t.created_at}).reduce(function(i,e){return i.push(t.getDay(e)),i},[]).filter(function(t,i,e){return e.indexOf(t)===i}).reduce(function(e,s){return e[s]=i.filter(function(i){return t.getDay(i.created_at)===s}),e},{})},isShort:function(){return this.profile.timeline.last_page<=5},isAtStart:function(){return this.profile.timeline.current_page<=2},isAtEnd:function(){return this.profile.timeline.last_page-this.profile.timeline.current_page<=2},hasMiddle:function(){return!this.isAtStart&&!this.isAtEnd},paginationUrl:function(){return route("administration.users.show",this.profile.id)+"?page="}}),watch:{locale:{handler:function(){this.getPage(this.profile.timeline.current_page)}}},created:function(){this.isAuth&&this.getProfile()},methods:c({},Object(s.d)(["setUserAvatar","initialise"]),{getProfile:function(){var t=this;axios.get(route(this.$route.name,this.$route.params.id)).then(function(i){t.profile=i.data.user}).catch(function(i){return t.handleError(i)})},deleteAvatar:function(){var t=this;axios.delete(route("core.avatars.destroy",this.user.avatarId)).then(function(){return t.setUserAvatar(null)}).catch(function(i){return t.handleError(i)})},exit:function(){var t=this;axios.post("/api/logout").then(function(){t.profile=null,t.$store.commit("initialise",!1),t.$store.commit("auth/logout"),t.$router.push({name:"login"})}).catch(function(i){t.handleError(i)})},getDay:function(t){return Object(o.a)(t,"dddd")},getHRDate:function(t){return Object(o.a)(t,this.meta.dateFormat)},getHRTime:function(t){return Object(o.a)(t,"H:mm")},getIcon:function(t){return t.indexOf("index")>0?n.J:t.indexOf("create")>0?n._2:t.indexOf("edit")>0?n._0:n._20},getClass:function(t){return t.indexOf("index")>0?"has-text-success":t.indexOf("create")>0?"has-text-warning":t.indexOf("edit")>0?"has-text-warning":"has-text-danger"},getPage:function(t){var i=this;axios.get(this.paginationUrl+t).then(function(t){var e=t.data;i.profile=e.user}).catch(function(t){return i.handleError(t)})}})}},HsvI:function(t,i,e){(t.exports=e("FZ+f")(!1)).push([t.i,"form.file-upload{display:inline-table}button.file-upload{background:transparent}.file-input.hidden{display:none}",""])},JUqL:function(t,i,e){var s=e("HsvI");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("02ef262b",s,!0,{})},Wv7l:function(t,i,e){var s=e("VU/8")(e("yAbN"),e("l8pi"),!1,function(t){e("JUqL")},null,null);t.exports=s.exports},hErZ:function(t,i,e){var s=e("VU/8")(e("5DJ5"),e("zC6v"),!1,function(t){e("yq+6")},null,null);t.exports=s.exports},kiKI:function(t,i,e){(t.exports=e("FZ+f")(!1)).push([t.i,".has-lateral-borders{border-left:1px solid rgba(0,0,0,.2);border-right:1px solid rgba(0,0,0,.2)}.stat-value{font-size:2em;padding-top:12px}.stat-key{font-size:1.4em;font-weight:200;padding-bottom:8px}.level.user-controls{margin-bottom:0}.timeline-content{-webkit-transition:all 1s ease;transition:all 1s ease}",""])},l8pi:function(t,i){t.exports={render:function(){var t=this.$createElement,i=this._self._c||t;return i("form",{staticClass:"file-upload is-marginless",on:{submit:function(t){t.preventDefault()}}},[i("input",{ref:"input",staticClass:"file-input hidden",attrs:{multiple:this.multiple,type:"file"},on:{change:this.upload}}),this._v(" "),this._t("upload-button",[i("a",{staticClass:"icon is-small",on:{click:this.openFileBrowser}},[i("fa",{attrs:{icon:"upload"}})],1)],{openFileBrowser:this.openFileBrowser})],2)},staticRenderFns:[]}},yAbN:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("QxPg"),a=e("EQBe"),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var e=[],s=!0,a=!1,n=void 0;try{for(var r,l=t[Symbol.iterator]();!(s=(r=l.next()).done)&&(e.push(r.value),!i||e.length!==i);s=!0);}catch(t){a=!0,n=t}finally{try{!s&&l.return&&l.return()}finally{if(a)throw n}}return e}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();s.default.library.add(a._23),i.default={props:{multiple:{type:Boolean,default:!1},url:{type:String,required:!0},fileSizeLimit:{type:Number,default:2e7},params:{type:Object,default:null},fileKey:{type:String,default:"file"}},data:function(){return{input:null,formData:new FormData,succesfull:0}},methods:{openFileBrowser:function(){this.$refs.input.click()},upload:function(){var t=this;this.$emit("upload-start"),this.setFormData(),0!==this.succesfull&&axios.post(this.url,this.formData).then(function(i){t.reset(),t.$emit("upload-successful",i.data)}).catch(function(i){t.reset(),t.$emit("upload-error");var e=i.response,s=e.data;422!==e.status?t.handleError(i):Object.keys(s.errors).forEach(function(i){return t.$toastr.error(s.errors[i][0])})})},setFormData:function(){var t=this.$refs.input.files;this.addFiles(t),this.succesfull>0&&this.addParams()},addFiles:function(t){if(this.multiple)for(var i=0;i<t.length;i++)this.sizeCheckPasses(t[i])&&(this.addFile(this.fileKey+"_"+i,t[i]),this.succesfull++);else this.addFile(this.fileKey,t[0])},addFile:function(t,i){this.sizeCheckPasses(i)&&(this.formData.append(t,i),this.succesfull++)},addParams:function(){var t=this;this.params&&Object.entries(this.params).forEach(function(i){var e=r(i,2),s=e[0],a=e[1],l="object"===(void 0===a?"undefined":n(a))?JSON.stringify(a):a;t.formData.append(s,l)})},sizeCheckPasses:function(t){return!(t.size>this.fileSizeLimit)||(this.$toastr.warning("File size Limit of "+this.fileSizeLimit+" Kb exceeded by "+t.name),!1)},reset:function(){this.$el.reset(),this.formData=new FormData,this.succesfull=0}}}},"yq+6":function(t,i,e){var s=e("kiKI");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("c2d73d6a",s,!0,{})},zC6v:function(t,i){t.exports={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.profile?e("div",[e("div",{staticClass:"box profile-heading"},[e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-half-desktop"},[e("div",{staticClass:"columns is-mobile"},[e("div",{staticClass:"column is-narrow"},[e("div",{staticClass:"image is-128x128"},[e("img",{attrs:{src:t.avatarLink}})])]),t._v(" "),e("div",{staticClass:"column"},[e("p",{staticClass:"title is-4 has-padding-top-medium"},[t._v("\n                            "+t._s(t.profile.fullName)+"\n                        ")]),t._v(" "),e("p",{staticClass:"subtitle is-5"},[t._v("\n                            "+t._s(t.__("role"))+": "+t._s(t.profile.role.name)+"\n                        ")]),t._v(" "),t.isSelfVisiting?e("div",{staticClass:"user-controls has-margin-top-small"},[t.avatarId?e("button",{staticClass:"button is-small is-warning",on:{click:t.deleteAvatar}},[e("span",{staticClass:"icon"},[e("fa",{attrs:{icon:"trash-alt"}})],1),t._v(" "),e("span",{staticClass:"is-hidden-mobile"},[t._v("\n                                    "+t._s(t.__("Avatar"))+"\n                                ")])]):t._e(),t._v(" "),t.avatarId?t._e():e("file-uploader",{attrs:{url:t.uploadAvatarLink,"file-key":"avatar"},on:{"upload-successful":function(i){t.setUserAvatar(i.id)}},scopedSlots:t._u([{key:"upload-button",fn:function(i){var s=i.openFileBrowser;return[e("button",{staticClass:"button is-small is-info",on:{click:s}},[e("span",{staticClass:"icon"},[e("fa",{attrs:{icon:"upload"}})],1),t._v(" "),e("span",{staticClass:"is-hidden-mobile"},[t._v("\n                                            "+t._s(t.__("Avatar"))+"\n                                        ")])])]}}])}),t._v(" "),e("button",{staticClass:"button is-small is-danger is-pulled-right",on:{click:function(i){t.exit()}}},[e("span",{staticClass:"icon"},[e("fa",{attrs:{icon:"sign-out-alt"}})],1),t._v(" "),e("span",[t._v("\n                                    "+t._s(t.__("Log Out"))+"\n                                ")])])],1):e("div",{staticClass:"has-margin-top-small"},[t.canAccess("core.impersonate.start")&&!t.impersonating?e("button",{staticClass:"button is-small is-warning",on:{click:function(i){t.$bus.$emit("start-impersonating",t.profile.id)}}},[t._v("\n                                "+t._s(t.__("Impersonate"))+"\n                            ")]):t._e()])])])]),t._v(" "),e("div",{staticClass:"column is-half-desktop"},[e("div",{staticClass:"level is-mobile has-margin-top-medium"},[e("div",{staticClass:"level-item has-text-centered"},[e("div",[e("p",{staticClass:"stat-value"},[t._v(t._s(t.profile.loginCount))]),t._v(" "),e("p",{staticClass:"stat-key"},[t._v(t._s(t.__("logins")))])])]),t._v(" "),e("div",{staticClass:"level-item has-text-centered has-lateral-borders"},[e("div",[e("p",{staticClass:"stat-value"},[t._v(t._s(t.profile.actionLogCount))]),t._v(" "),e("p",{staticClass:"stat-key"},[t._v(t._s(t.__("actions")))])])]),t._v(" "),e("div",{staticClass:"level-item has-text-centered"},[e("div",[e("p",{staticClass:"stat-value"},[t._v(t._s(t.profile.rating))]),t._v(" "),e("p",{staticClass:"stat-key"},[t._v(t._s(t.__("rating")))])])])])])])]),t._v(" "),e("div",{staticClass:"columns is-centered"},[e("div",{staticClass:"column is-two-thirds-tablet"},[e("div",{staticClass:"box"},[e("nav",{staticClass:"pagination is-small has-margin-bottom-large"},[e("a",{staticClass:"pagination-previous",attrs:{disabled:null===t.profile.timeline.prev_page_url},on:{click:function(i){t.getPage(t.profile.timeline.current_page-1)}}},[t._v("\n                        "+t._s(t.__("Previous"))+"\n                    ")]),t._v(" "),e("a",{staticClass:"pagination-next",attrs:{disabled:null===t.profile.timeline.next_page_url},on:{click:function(i){t.getPage(t.profile.timeline.current_page+1)}}},[t._v("\n                        "+t._s(t.__("Next"))+"\n                    ")]),t._v(" "),t.isShort?e("ul",{staticClass:"pagination-list"},t._l(t.profile.timeline.last_page,function(i){return e("li",{key:i},[e("a",{staticClass:"pagination-link",class:{"is-current":t.profile.timeline.current_page===i},on:{click:function(e){t.getPage(i)}}},[t._v("\n                                "+t._s(i)+"\n                            ")])])})):t._e(),t._v(" "),t.isAtStart&&!t.isShort?e("ul",{staticClass:"pagination-list"},[t._l(3,function(i){return e("li",{key:i},[e("a",{staticClass:"pagination-link",class:{"is-current":t.profile.timeline.current_page===i},on:{click:function(e){t.getPage(i)}}},[t._v("\n                                "+t._s(i)+"\n                            ")])])}),t._v(" "),t._m(0),t._v(" "),e("li",[e("a",{staticClass:"pagination-link",on:{click:function(i){t.getPage(t.profile.timeline.last_page)}}},[t._v("\n                                "+t._s(t.profile.timeline.last_page)+"\n                            ")])])],2):t._e(),t._v(" "),t.hasMiddle&&!t.isShort?e("ul",{staticClass:"pagination-list"},[e("li",[e("a",{staticClass:"pagination-link",on:{click:function(i){t.getPage(1)}}},[t._v("\n                                1\n                            ")])]),t._v(" "),t._m(1),t._v(" "),e("li",[e("a",{staticClass:"pagination-link",on:{click:function(i){t.getPage(t.profile.timeline.current_page-1)}}},[t._v("\n                                "+t._s(t.profile.timeline.current_page-1)+"\n                            ")])]),t._v(" "),e("li",[e("a",{staticClass:"pagination-link is-current"},[t._v("\n                                "+t._s(t.profile.timeline.current_page)+"\n                            ")])]),t._v(" "),e("li",[e("a",{staticClass:"pagination-link",on:{click:function(i){t.getPage(t.profile.timeline.current_page+1)}}},[t._v("\n                                "+t._s(t.profile.timeline.current_page+1)+"\n                            ")])]),t._v(" "),t._m(2),t._v(" "),e("li",[e("a",{staticClass:"pagination-link",on:{click:function(i){t.getPage(t.profile.timeline.last_page)}}},[t._v("\n                                "+t._s(t.profile.timeline.last_page)+"\n                            ")])])]):t._e(),t._v(" "),t.isAtEnd&&!t.isShort?e("ul",{staticClass:"pagination-list"},[e("li",[e("a",{staticClass:"pagination-link",on:{click:function(i){t.getPage(1)}}},[t._v("\n                                1\n                            ")])]),t._v(" "),t._m(3),t._v(" "),t._l(3,function(i){return e("li",{key:i},[e("a",{staticClass:"pagination-link",class:{"is-current":t.profile.timeline.current_page===t.profile.timeline.last_page-3+i},on:{click:function(e){t.getPage(t.profile.timeline.last_page-3+i)}}},[t._v("\n                                "+t._s(t.profile.timeline.last_page-3+i)+"\n                            ")])])})],2):t._e()]),t._v(" "),e("ul",{staticClass:"timeline has-padding-large"},[t._l(t.timeline,function(i,s){return e("div",{key:s,staticClass:"timeline-content"},[e("li",{staticClass:"timeline-header"},[e("span",{staticClass:"tag is-medium is-primary"},[t._v(t._s(t.__(s)))])]),t._v(" "),t._l(i,function(i,s){return e("li",{key:s,staticClass:"timeline-item"},[e("div",{staticClass:"timeline-marker is-icon",class:t.getClass(i.route)},[e("fa",{attrs:{icon:t.getIcon(i.route),size:"xs"}})],1),t._v(" "),e("div",{staticClass:"timeline-content"},[e("p",{staticClass:"heading"},[t._v("\n                                    "+t._s(t.getHRDate(i.created_at))+"\n                                    "+t._s(t.getHRTime(i.created_at))+"\n                                ")]),t._v(" "),e("p",[t._v(t._s(i.permission.description))])])])})],2)}),t._v(" "),t.profile.timeline.current_page===t.profile.timeline.last_page?e("li",{staticClass:"timeline-header"},[e("span",{staticClass:"tag is-medium is-primary"},[t._v(t._s(t.__("End")))])]):e("li",{staticClass:"timeline-item"},[e("div",{staticClass:"timeline-marker is-icon"},[e("fa",{attrs:{icon:"ellipsis-h",size:"xs"}})],1)])],2)])])])]):t._e()},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("li",[i("span",{staticClass:"pagination-ellipsis"},[this._v("…")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("li",[i("span",{staticClass:"pagination-ellipsis"},[this._v("…")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("li",[i("span",{staticClass:"pagination-ellipsis"},[this._v("…")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("li",[i("span",{staticClass:"pagination-ellipsis"},[this._v("…")])])}]}}});
//# sourceMappingURL=61.js.map